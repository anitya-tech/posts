# src
.dist: &src.dist
  pattern: posts/.vuepress/dist/**/*
  strip: posts/.vuepress/dist/

# dists
.anityaSite: &dist.anityaSite
  type: "@oss"
  bucket: me-anitya-post
  region: oss-cn-hongkong
  accessKeyId: $Ali_Key
  accessKeySecret: $Ali_Secret

# rules
# make all files public read
.public: &rule.public
  pattern: "**/*"
  acl: public-read

# apply mime type for all files
.mime: &rule.mime
  pattern: "**/*"
  autoMimeType: true

environments:
  default:
    - source: *src.dist
      dist: *dist.anityaSite
      rules:
        - *rule.public
        - *rule.mime
        - pattern: "*"
          headers:
            "Cache-Control": public, max-age=60
        - pattern: "precache*.js"
          headers:
            "Cache-Control": public, max-age=31536000
        - pattern: "assets/img/**/*"
          headers:
            "Cache-Control": public, max-age=31536000
        - pattern: "assets/css/**/*"
          headers:
            "Cache-Control": public, max-age=31536000
        - pattern: "assets/js/**/*"
          headers:
            "Cache-Control": public, max-age=31536000
